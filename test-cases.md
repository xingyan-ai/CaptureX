# CaptureX - 精准比例截图插件测试用例

## 1. 测试目标
确保 CaptureX 插件的所有功能符合产品需求文档（PRD）、开发文档和扩展需求文档中的规定。验证插件的稳定性、易用性和在各种场景下的表现，保证高质量的用户体验。

## 2. 测试范围
- **核心功能**: 固定比例截图、截图框交互、截图生成与输出。
- **扩展功能**: 自定义尺寸（比例和固定像素）的创建、管理和使用。
- **用户界面 (UI)**: Popup 弹窗和内容页截图界面的所有元素。
- **边缘情况**: 特殊网页内容、用户异常操作等。
- **性能与兼容性**: 插件在不同情况下的性能表现和浏览器兼容性。

---

### **Part 1: 核心功能测试 (基于 PRD)**

| 用例ID | 模块 | 测试目标 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **TC-CORE-001** | Popup 界面 | 验证插件图标点击后能正确弹出操作窗口 | 插件已安装并启用 | 1. 在任意网页点击浏览器工具栏的 CaptureX 图标。 | 1. 成功弹出操作窗口。<br>2. 窗口中显示 "CaptureX" 标题。<br>3. 包含 "1.75:1" 和 "2.35:1" 两个比例选择按钮。<br>4. 包含 "开始截图" 和 "取消" 按钮。 | **高** |
| **TC-CORE-002** | 启动截图 | 验证选择预设比例并启动截图功能 | 插件 Popup 已打开 | 1. 点击 "1.75:1" 比例按钮。<br>2. 点击 "开始截图" 按钮。 | 1. Popup 窗口关闭。<br>2. 页面上出现半透明遮罩层。<br>3. 页面中心出现一个符合 1.75:1 比例的截图框。<br>4. 截图框尺寸默认为 400x229 像素。 | **高** |
| **TC-CORE-003** | 启动截图 | 验证选择另一个预设比例并启动截图 | 插件 Popup 已打开 | 1. 点击 "2.35:1" 比例按钮。<br>2. 点击 "开始截图" 按钮。 | 1. Popup 窗口关闭。<br>2. 页面上出现半透明遮罩层。<br>3. 页面中心出现一个符合 2.35:1 比例的截图框。<br>4. 截图框尺寸默认为 400x170 像素。 | **高** |
| **TC-CORE-004** | 截图框交互 | 验证截图框可以被拖拽移动 | 已启动截图模式 | 1. 鼠标移动到截图框内部，光标变为可移动状态。<br>2. 按下鼠标左键并拖动。 | 1. 截图框跟随鼠标移动。 | **高** |
| **TC-CORE-005** | 截图框交互 | 验证截图框可以等比例缩放 | 已启动截图模式 | 1. 鼠标移动到截图框的四个角任意一个，光标变为缩放状态。<br>2. 按下鼠标左键并拖动。 | 1. 截图框大小随鼠标拖动而改变。<br>2. 截图框始终保持初始选择的宽高比。<br>3. 截图框上有实时显示的像素尺寸信息。 | **高** |
| **TC-CORE-006** | 截图框交互 | 验证截图框有最小尺寸限制 | 已启动截图模式 (1.75:1) | 1. 拖动缩放角，将截图框缩小到最小。 | 1. 截图框无法再缩小，最小尺寸为 100x57 像素。 | **中** |
| **TC-CORE-007** | 截图与输出 | 验证截图并下载功能 | 已启动截图模式，调整好截图框位置 | 1. 点击截图工具栏的 "确认" 按钮。<br>2. 在弹出的结果面板中，点击 "下载到本地"。 | 1. 截图框和遮罩层消失。<br>2. 浏览器触发文件下载，文件名为 `screencut-image.png`。<br>3. 下载的图片内容与截图框内完全一致，比例正确。 | **高** |
| **TC-CORE-008** | 截图与输出 | 验证截图并复制到剪贴板功能 | 已启动截图模式，调整好截图框位置 | 1. 点击截图工具栏的 "确认" 按钮。<br>2. 在弹出的结果面板中，点击 "复制到剪贴板"。 | 1. 截图框和遮罩层消失。<br>2. 提示 "复制成功"。<br>3. 能将图片粘贴到其他应用（如画图、聊天工具）中。 | **高** |
| **TC-CORE-009** | 取消操作 | 验证在截图过程中可以取消操作 | 已启动截图模式 | 1. 点击截图工具栏的 "取消" 按钮。 | 1. 截图框和遮罩层消失，页面恢复正常。 | **高** |

---

### **Part 2: 扩展功能测试 (基于 扩展需求.md)**

| 用例ID | 模块 | 测试目标 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **TC-EXT-001** | 自定义尺寸 | 验证 "新建尺寸" 表单的显示与隐藏 | 插件 Popup 已打开 | 1. 点击尺寸列表末尾的 "+" 或 "新建" 按钮。<br>2. 点击表单中的 "取消" 按钮。 | 1. 弹出新建尺寸表单，包含名称、类型、尺寸和保存/取消按钮。<br>2. 表单消失。 | **高** |
| **TC-EXT-002** | 自定义尺寸 | 验证创建和保存一个新的 "比例" 尺寸 | "新建尺寸" 表单已打开 | 1. 名称输入 "测试比例 16:9"。<br>2. 类型选择 "比例"。<br>3. 尺寸分别输入 `16` 和 `9`。<br>4. 点击 "保存"。 | 1. 表单消失。<br>2. 尺寸列表中出现 "测试比例 16:9" 选项。<br>3. 该项旁边有 "删除" 按钮。 | **高** |
| **TC-EXT-003** | 自定义尺寸 | 验证创建和保存一个新的 "像素" 尺寸 | "新建尺寸" 表单已打开 | 1. 名称输入 "固定尺寸 800x600"。<br>2. 类型选择 "像素"。<br>3. 尺寸分别输入 `800` 和 `600`。<br>4. 点击 "保存"。 | 1. 表单消失。<br>2. 尺寸列表中出现 "固定尺寸 800x600" 选项。<br>3. 该项旁边有 "删除" 按钮。 | **高** |
| **TC-EXT-004** | 自定义尺寸 | 验证使用自定义 "比例" 尺寸进行截图 | 已保存自定义比例 | 1. 在 Popup 中选择 "测试比例 16:9"。<br>2. 点击 "开始截图"。<br>3. 拖动截图框的角进行缩放。 | 1. 页面上出现符合 16:9 比例的截图框。<br>2. 缩放时，截图框始终保持 16:9 比例。 | **高** |
| **TC-EXT-005** | 自定义尺寸 | 验证使用自定义 "像素" 尺寸进行截图 | 已保存自定义像素尺寸 | 1. 在 Popup 中选择 "固定尺寸 800x600"。<br>2. 点击 "开始截图"。 | 1. 页面上出现一个固定为 800x600 像素的截图框。<br>2. 截图框可以移动，但**不能**被缩放（四个角没有缩放控制点或拖动无效）。 | **高** |
| **TC-EXT-006** | 自定义尺寸 | 验证删除自定义尺寸的功能 | 已保存至少一个自定义尺寸 | 1. 点击 "测试比例 16:9" 旁边的 "删除" 按钮。<br>2. 确认删除。 | 1. 该尺寸项从列表中移除。<br>2. 重新打开 Popup，该尺寸不再存在。 | **高** |
| **TC-EXT-007** | 自定义尺寸 | 验证默认尺寸不可删除 | 插件 Popup 已打开 | 1. 检查 "1.75:1" 和 "2.35:1" 两个默认尺寸项。 | 1. 默认尺寸项旁边没有 "删除" 按钮。 | **高** |
| **TC-EXT-008** | 数据持久化 | 验证自定义尺寸在关闭浏览器后依然存在 | 已创建自定义尺寸 | 1. 创建一个自定义尺寸。<br>2. 关闭 Chrome 浏览器再重新打开。<br>3. 打开插件 Popup。 | 1. 之前创建的自定义尺寸依然在列表中。 | **高** |

---

### **Part 3: 边缘情况与健壮性测试**

| 用例ID | 模块 | 测试目标 | 前置条件 | 测试步骤 | 预期结果 | 优先级 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **TC-EDGE-001** | 兼容性 | 在包含跨域 iframe 的页面上截图 | 打开一个有跨域 iframe 的网页 | 1. 启动截图。<br>2. 将截图框的一部分或全部置于 iframe 之上。<br>3. 执行截图。 | 1. 截图功能可以正常完成。<br>2. 最终生成的图片中，iframe 区域显示为占位提示或空白，而不是报错。 | **中** |
| **TC-EDGE-002** | 兼容性 | 在包含视频或 GIF 动图的页面上截图 | 打开一个有播放中视频的网页 | 1. 启动截图。<br>2. 将截图框置于视频之上。 | 1. 截图时，视频/动图应暂停播放。<br>2. 截取到的是视频/动图的静态画面。 | **中** |
| **TC-EDGE-003** | 交互 | 截图框超出浏览器可视区域 | 启动截图 | 1. 将截图框拖动到浏览器窗口的边缘，使其部分不可见。<br>2. 缩放截图框使其尺寸大于可视区域。 | 1. 页面应能自动滚动，以确保截图框的操作点可见。<br>2. 或者，截图框被限制在可视区域内移动。 | **中** |
| **TC-EDGE-004** | 健壮性 | 在截图过程中调整浏览器窗口大小 | 已启动截图模式 | 1. 调整浏览器窗口的大小。 | 1. 截图遮罩层和截图框应能自适应新的窗口大小，不会错位或导致功能异常。 | **中** |
| **TC-EDGE-005** | 健壮性 | 在截图过程中刷新页面 | 已启动截图模式 | 1. 按 F5 刷新页面。 | 1. 截图会话终止，页面正常刷新，插件恢复到初始状态。 | **低** |
| **TC-EDGE-006** | 性能 | 在一个非常长的页面上截图 | 打开一个需要滚动很多屏的网页 | 1. 启动截图。<br>2. 拖动和缩放截图框。 | 1. 插件交互保持流畅，没有明显卡顿。 | **中** |
| **TC-EDGE-007** | 兼容性 | 在高分屏 (Retina) 上截图 | 使用高DPI显示器 | 1. 执行一次截图并下载。 | 1. 下载的图片清晰，没有模糊，尺寸与物理像素对应正确。 | **高** |
