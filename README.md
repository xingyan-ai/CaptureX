# CaptureX - 自定义截图浏览器扩展

一款为您量身定制的自定义截图工具，专为内容创作者、设计师和产品经理打造，提供专业、高效、美观的截图体验。

该项目从一个基础原型开始，通过多次迭代，解决了与现代前端框架（如 React）的兼容性问题、内容安全策略（CSP）限制，并最终实现了一个功能稳定、性能优良且具备精致用户界面的高质量扩展。

## ✨ 核心功能

### 📐 智能截图模式
- **精准比例截图**: 内置两种专业比例，一键切换，满足主流内容平台发布需求。
  - **1.75:1**: 博客、知乎等平台的博客封面推荐尺寸。
  - **2.35:1**: 微信公众号等平台的封面图推荐尺寸。
- **自定义尺寸**: 支持添加自定义比例和像素尺寸，满足个性化截图需求。
- **全屏截图**: 支持整页截图，自动处理超长页面。

### 🎯 用户体验优化
- **沉浸式聚焦模式**: 启动截图时，选区外的内容会被一层优雅的半透明深色遮罩覆盖，让用户的注意力完全集中在截图内容上。
- **实时Toast提示**: 全新的提示系统为每个操作提供即时反馈：
  - 🎯 开始截图的操作引导
  - ✅ 复制成功确认
  - 📥 下载完成提示
  - ✋ 取消操作反馈
  - ❌ 错误信息说明
- **现代化UI设计**: 
  - 采用 **Linear 设计风格**，提供深色模式和精致视觉细节
  - 左右平衡布局，统一的按钮高度和间距
  - 流畅的动画效果和悬停反馈

### 💾 智能复制与下载
- **多层次复制策略**: 
  - **自动复制**: HTTPS环境下自动复制图片到剪贴板
  - **兼容回退**: HTTP环境下提供友好的手动复制界面
  - **错误处理**: 失败时提供清晰的解决方案指引
- **一键下载**: 支持PNG格式，自动命名包含时间戳

### 🔧 高性能与高兼容性
- 采用**程序化注入**，有效绕过多数网站严格的 CSP 限制。
- 通过**状态管理和事件驱动**的架构，解决了在 React、Vue 等单页应用（SPA）上无法重复截图的问题。
- 截图框即时响应，无延迟感。
- **可重复使用**: 无需刷新页面，即可在同一个网站上反复进行截图操作，极大提升了工作流效率。

## 🚀 技术实现

- **Manifest V3**: 遵循最新的 Chrome 扩展规范，确保安全性和未来的兼容性。
- **程序化注入 (`chrome.scripting`)**: 动态地将内容脚本注入目标页面，以应对严格的 CSP 和实现按需加载。
- **常驻内容脚本**: 通过 `ping/pong` 消息机制和完善的状态管理，实现了可反复激活的内容脚本服务，解决了在单页应用中"一次性"脚本无法工作的问题。
- **CSS 遮罩技术**: 使用四个独立的 `div` 元素动态计算并构成遮罩层，实现了高性能、无视觉错误的"聚焦模式"。
- **智能错误处理**: 完善的try-catch机制和错误恢复策略，确保核心功能的稳定性。
- **Vanilla JavaScript**: 所有功能均使用原生 JavaScript 实现，无任何外部框架依赖，确保了扩展的轻量和高性能。

## 🛠️ 如何使用

1.  在 Chrome 中加载本扩展。
2.  在任意网页点击扩展图标，打开控制弹窗。
3.  选择一个截图比例（如 1.75:1）或点击"+ 新建尺寸"添加自定义尺寸。
4.  点击对应尺寸进行截图。
5.  此时，页面会出现一个预设好比例的截图框，框外有半透明遮罩，右上角显示操作引导。
6.  您可以拖动截图框，或通过拖动边角来调整其大小（比例始终保持不变）。
7.  调整好后，点击截图框下方的"下载"或"复制"按钮：
    - **下载**: 图片自动保存到下载文件夹，显示成功提示
    - **复制**: HTTPS网站自动复制，HTTP网站弹出手动复制界面
8.  点击"取消"或按 `ESC` 键可随时退出截图模式。

## 🎨 界面预览

### 扩展弹窗
- 简洁的预设尺寸列表
- "新建尺寸"和"设置"的左右平衡布局
- Linear风格的深色主题

### 截图界面
- 高对比度的选区边框
- 智能定位的工具栏
- 实时尺寸显示
- 优雅的Toast提示动画

## 📦 安装方法

### 开发者模式安装
1. 下载或克隆本项目到本地
2. 打开 Chrome 浏览器，进入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹即可安装

### 从 Chrome 网上应用店安装
*即将上线...*

## 🔄 版本更新

### v2.0.0 (最新)
- ✨ 新增Toast提示系统，提供全方位操作反馈
- 🎨 优化UI布局，采用左右平衡设计
- 🔧 完善复制功能，支持HTTP/HTTPS环境兼容
- 🐛 修复截图框显示问题和鼠标事件处理
- 🚀 增强错误处理和代码稳定性

### v1.0.0
- 🎉 初始版本发布
- 📐 基础截图功能
- 🎯 比例截图支持
- 💾 下载和复制功能

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进 CaptureX！

### 开发环境设置
```bash
# 克隆项目
git clone https://github.com/xingyan-ai/CaptureX.git

# 安装依赖（如需要）
npm install

# 运行测试
npm test
```

## 📄 许可证

MIT License

---

*为您量身定制的自定义截图工具 - CaptureX*