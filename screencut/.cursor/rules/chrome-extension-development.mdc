---
alwaysApply: true
---

# Chrome扩展开发规范

## Manifest V3 开发要求
- 使用最新的 Manifest V3 规范
- 遵循服务工作者(Service Worker)模式而非后台页面
- 正确配置权限：activeTab, scripting, storage

## 代码风格要求
- **JavaScript**: 使用Vanilla JS，无框架依赖
- **注释**: 必须极其详细，解释每个功能的作用和原理
- **命名**: 使用驼峰命名法，变量名要有意义
- **错误处理**: 必须包含完整的try-catch错误处理

## 消息通信规范
```javascript
// popup -> content script
chrome.tabs.sendMessage(tabId, {
  action: 'startCapture',
  ratio: selectedRatio
});

// content script -> popup
chrome.runtime.sendMessage({
  action: 'captureComplete',
  imageData: base64Data
});
```

## 文件结构要求
- popup/ - 用户界面相关文件
- content/ - 页面注入脚本
- background/ - 后台服务脚本
- utils/ - 工具函数模块

## Linear设计风格CSS要求
- 使用简洁的线条和柔和的圆角
- 主色调：黑白灰 + 蓝色强调
- 字体：-apple-system, BlinkMacSystemFont, 'Segoe UI'
- 过渡动画：all 0.2s ease

## 核心功能实现要点
- 比例计算必须精确到小数点后2位
- 截图框必须支持等比例缩放
- 截图质量要支持高分辨率屏幕
- 必须处理跨域内容的特殊情况
# Chrome扩展开发规范

## Manifest V3 开发要求
- 使用最新的 Manifest V3 规范
- 遵循服务工作者(Service Worker)模式而非后台页面
- 正确配置权限：activeTab, scripting, storage

## 代码风格要求
- **JavaScript**: 使用Vanilla JS，无框架依赖
- **注释**: 必须极其详细，解释每个功能的作用和原理
- **命名**: 使用驼峰命名法，变量名要有意义
- **错误处理**: 必须包含完整的try-catch错误处理

## 消息通信规范
```javascript
// popup -> content script
chrome.tabs.sendMessage(tabId, {
  action: 'startCapture',
  ratio: selectedRatio
});

// content script -> popup
chrome.runtime.sendMessage({
  action: 'captureComplete',
  imageData: base64Data
});
```

## 文件结构要求
- popup/ - 用户界面相关文件
- content/ - 页面注入脚本
- background/ - 后台服务脚本
- utils/ - 工具函数模块

## Linear设计风格CSS要求
- 使用简洁的线条和柔和的圆角
- 主色调：黑白灰 + 蓝色强调
- 字体：-apple-system, BlinkMacSystemFont, 'Segoe UI'
- 过渡动画：all 0.2s ease

## 核心功能实现要点
- 比例计算必须精确到小数点后2位
- 截图框必须支持等比例缩放
- 截图质量要支持高分辨率屏幕
- 必须处理跨域内容的特殊情况
